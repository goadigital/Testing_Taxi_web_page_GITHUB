var phoneNumber=(typeof whatsappNo!=="undefined")?whatsappNo:'917878781984';var previewImgUrl=(typeof previewImage!=="undefined")?previewImage:'/thumbnail.png';const form=document.getElementById('taxiForm');const dateInput=document.getElementById('date');const hourSel=document.getElementById('hour');const minSel=document.getElementById('minute');const ampmSel=document.getElementById('ampm');const custName=document.getElementById('custName');const custMobile=document.getElementById('custMobile');const waFallback=document.getElementById('waFallback');const callBtn=document.getElementById('callBtn');callBtn.href='tel:+'+phoneNumber;const monthsShort=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];function formatDateToDDMMMYYYY(value){if(!value)return'';const parts=value.split('-');if(parts.length!==3)return value;const y=parts[0],m=parseInt(parts[1],10)-1,d=parts[2];const month=monthsShort[m]||'';const day=d.length===1?'0'+d:d;return day+'-'+month+'-'+y}
function starLabel(text){return'*'+text+'*'}
form.addEventListener('submit',function(e){e.preventDefault();if(!custName.value.trim()||!custMobile.value.trim()||!dateInput.value){alert('Please complete required fields: Name, Mobile and Pick date.');return}
let message=starLabel('Taxi Booking Request')+'\n\n';message+=starLabel('Name')+': '+(custName.value||'')+'\n';message+=starLabel('Mobile no')+': '+(custMobile.value||'')+'\n\n';const rawDate=dateInput.value||'';const date=formatDateToDDMMMYYYY(rawDate);message+=starLabel('Pick date')+': '+date+'\n';const hour=hourSel.value;const min=minSel.value;const ampm=ampmSel.value;const time=(hour&&min&&ampm)?hour+':'+min+' '+ampm:'';message+=starLabel('Pick up time')+': '+time+'\n\n';message+=starLabel('Pick up location')+': '+(document.getElementById('pickup').value||'')+'\n';message+=starLabel('Drop location')+': '+(document.getElementById('drop').value||'')+'\n\n';message+='Please confirm.';const encoded=encodeURIComponent(message);const waWeb='https://wa.me/'+phoneNumber+'?text='+encoded;const waApp='whatsapp://send?phone='+phoneNumber+'&text='+encoded;let attempted=!1;function fallback(){if(attempted)return;attempted=!0;waFallback.style.display='block'}
let isMobile=/Android|iPhone|iPad|iPod/i.test(navigator.userAgent);if(isMobile){window.location.href=waApp;setTimeout(function(){window.location.href=waWeb;setTimeout(fallback,1600)},1200)}else{window.open(waWeb,'_blank');setTimeout(fallback,1200)}});try{const today=new Date();const yyyy=today.getFullYear();let mm=today.getMonth()+1;if(mm<10)mm='0'+mm;let dd=today.getDate();if(dd<10)dd='0'+dd;dateInput.value=yyyy+'-'+mm+'-'+dd}catch(e){}